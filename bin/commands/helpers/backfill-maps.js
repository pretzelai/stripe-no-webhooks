export const SYNC_OBJECTS = [
  "all",
  "charge",
  "checkout_session",
  "coupon",
  "credit_note",
  "customer",
  "dispute",
  "invoice",
  "payment_intent",
  "payment_method",
  "plan",
  "price",
  "product",
  "refund",
  "setup_intent",
  "subscription",
  "subscription_schedule",
];

export const SYNC_ORDER = [
  {
    key: "product",
    table: "products",
    label: "Products",
    stripeMethod: "products",
  },
  { key: "price", table: "prices", label: "Prices", stripeMethod: "prices" },
  {
    key: "coupon",
    table: "coupons",
    label: "Coupons",
    stripeMethod: "coupons",
  },
  { key: "plan", table: "plans", label: "Plans", stripeMethod: "plans" },
  {
    key: "customer",
    table: "customers",
    label: "Customers",
    stripeMethod: "customers",
  },
  {
    key: "subscription",
    table: "subscriptions",
    label: "Subscriptions",
    stripeMethod: "subscriptions",
  },
  {
    key: "subscription_schedule",
    table: "subscription_schedules",
    label: "Subscription Schedules",
    stripeMethod: "subscriptionSchedules",
  },
  {
    key: "invoice",
    table: "invoices",
    label: "Invoices",
    stripeMethod: "invoices",
  },
  {
    key: "charge",
    table: "charges",
    label: "Charges",
    stripeMethod: "charges",
  },
  {
    key: "payment_intent",
    table: "payment_intents",
    label: "Payment Intents",
    stripeMethod: "paymentIntents",
  },
  {
    key: "payment_method",
    table: "payment_methods",
    label: "Payment Methods",
    stripeMethod: "paymentMethods",
  },
  {
    key: "setup_intent",
    table: "setup_intents",
    label: "Setup Intents",
    stripeMethod: "setupIntents",
  },
  {
    key: "refund",
    table: "refunds",
    label: "Refunds",
    stripeMethod: "refunds",
  },
  {
    key: "dispute",
    table: "disputes",
    label: "Disputes",
    stripeMethod: "disputes",
  },
  {
    key: "credit_note",
    table: "credit_notes",
    label: "Credit Notes",
    stripeMethod: "creditNotes",
  },
  {
    key: "checkout_session",
    table: "checkout_sessions",
    label: "Checkout Sessions",
    stripeMethod: "checkout.sessions",
  },
];

export const REQUIRED_TABLES = [
  "customers",
  "products",
  "prices",
  "subscriptions",
  "invoices",
];

// Field definitions: [stripeField, dbField?, isRef?, isJson?]
// If dbField is omitted, uses stripeField. If isRef=true, extracts .id from objects
export const FIELD_MAPS = {
  products: [
    ["name"],
    ["description"],
    ["active"],
    ["images", null, false, true],
    ["default_price", null, true],
    ["updated"],
  ],
  prices: [
    ["active"],
    ["currency"],
    ["unit_amount"],
    ["type"],
    ["recurring", null, false, true],
    ["product", null, true],
    ["nickname"],
    ["billing_scheme"],
    ["lookup_key"],
  ],
  customers: [
    ["email"],
    ["name"],
    ["phone"],
    ["description"],
    ["address", null, false, true],
    ["shipping", null, false, true],
    ["balance"],
    ["currency"],
    ["delinquent"],
    ["default_source"],
    ["invoice_settings", null, false, true],
    ["deleted"],
  ],
  subscriptions: [
    ["status"],
    ["customer", null, true],
    ["current_period_start"],
    ["current_period_end"],
    ["cancel_at_period_end"],
    ["canceled_at"],
    ["items", null, false, true],
    ["latest_invoice", null, true],
    ["default_payment_method", null, true],
    ["collection_method"],
  ],
  invoices: [
    ["status"],
    ["customer", null, true],
    ["subscription", null, true],
    ["total"],
    ["amount_due"],
    ["amount_paid"],
    ["currency"],
    ["paid"],
    ["number"],
    ["hosted_invoice_url"],
    ["invoice_pdf"],
    ["lines", null, false, true],
    ["period_start"],
    ["period_end"],
  ],
  charges: [
    ["amount"],
    ["currency"],
    ["status"],
    ["paid"],
    ["refunded"],
    ["customer", null, true],
    ["payment_intent", null, true],
    ["invoice", null, true],
    ["description"],
  ],
  payment_intents: [
    ["amount"],
    ["currency"],
    ["status"],
    ["customer", null, true],
    ["payment_method", null, true],
    ["description"],
    ["invoice", null, true],
  ],
  payment_methods: [
    ["type"],
    ["customer", null, true],
    ["billing_details", null, false, true],
    ["card", null, false, true],
  ],
  coupons: [
    ["name"],
    ["percent_off"],
    ["amount_off"],
    ["currency"],
    ["duration"],
    ["duration_in_months"],
    ["valid"],
    ["times_redeemed"],
    ["max_redemptions"],
  ],
  plans: [
    ["active"],
    ["amount"],
    ["currency"],
    ["interval"],
    ["interval_count"],
    ["product", null, true],
    ["nickname"],
  ],
  refunds: [
    ["amount"],
    ["currency"],
    ["status"],
    ["charge", null, true],
    ["payment_intent", null, true],
    ["reason"],
  ],
  disputes: [
    ["amount"],
    ["currency"],
    ["status"],
    ["charge", null, true],
    ["payment_intent", null, true],
    ["reason"],
  ],
  setup_intents: [
    ["status"],
    ["customer", null, true],
    ["payment_method", null, true],
    ["description"],
    ["usage"],
  ],
  subscription_schedules: [
    ["status"],
    ["customer", null, true],
    ["subscription", null, true],
    ["phases", null, false, true],
    ["current_phase", null, false, true],
    ["end_behavior"],
  ],
  credit_notes: [
    ["amount"],
    ["currency"],
    ["status"],
    ["customer", null, true],
    ["invoice", null, true],
    ["reason"],
    ["total"],
  ],
  checkout_sessions: [
    ["status"],
    ["customer", null, true],
    ["payment_intent", null, true],
    ["subscription", null, true],
    ["mode"],
    ["payment_status"],
    ["amount_total"],
    ["currency"],
    ["url"],
  ],
};
